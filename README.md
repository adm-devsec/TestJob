## Тестовое задание

.NET Core 6 (кроссплатформенный linux / windows)

Необходимо реализовать 1 REST API функцию.
Метод - POST, в теле запроса передается JSON.

Весь прикладной код должен быть вынесен в отдельную функцию. API-контроллер просто передает, полученный объект в данную функцию, затем возвращает пользователю полученный результат обработки. 

Тестовые входящие данные (JSON) приведены в файлах json_payload_1.txt, json_payload_2.txt.

## Описание входящего объекта:

* selector - строка - CSS-селектор // потребуется для одной из задач
* attribute - строка - наименования HTML атрибута // потребуется для одной из задач
* url_b64 - строка - строка URL, закодированная в Base64
* encrypted_text_bytes_b64 - массив байтов, закодированный в Base64 - это результат шифрования строки алгоритмом AES256 в режиме ECB с PaddingMode.None // потребуется для одной из задач
* key_bytes_b64 - массив байтов, закодированный в Base64 - это ключ для AES256, который использовался для шифрования текста // потребуется для одной из задач
* page_b64 - строка - код HTML-страницы, закодированный в Base64       // код страницы в открытом виде привед в файле web-page.txt для информации и проверки результатов работы


## Задача для данной API-функции:

1) Раскодировать URL и PAGE из base64 в открытый вид

2) С помощью библиотеки AngleSharp:
	- провести парсинг page (преобразование HTML-текста в DOM-объект)
	- выбрать все элементы по CSS-селектору, указанному во входящем объекте
	- определить количество полученных элементов
	- для каждого элемента получить значение (строка) атрибута HTML, указанного во входящем объекте
	- сформировать List<string> cо значениями этих атрибутов

3) с помощью регулярного выражения получить значения всех email-адресов в коде страницы. Посчитать их количество. Сформировать List<string> с полученными email

4) С помощью ключа из входящего параметра параметра key_bytes_b64 расшифровать текст из входящего параметра encrypted_text_bytes_b64. Использовать для расшифровки стандартые библиотеки шифрования .NET. Использовать алгоритм шифрования/дешифрования AES 256 в режиме ECB с PaddingMode.None. 

5) реализовать обработку исключений в связи возможными некорректными входящими значениями: 
	- ошибка при декодинге base64 в URL
	- ошибка при декодинге base64 в Page
	- отсутствие какого-либо параметра во входящем объекте
	- пустой селектор во входящем объекте
	- пустой атрибут во входящем объекте
	- иные ошибки

6) ответ на запрос представляет из себя объект, сериализованный в JSON, с отступами для удобного чтения, со следующими полями:

* is_error - int - есть или нет ошибка при обработке запроса
* error_code - string - текстовый код ошибки (придумать самостоятельно)
* error_message - string - для "иных ошибок" - exception.errormessage
* elements_count - int - количество выбранных по селектору элементов
* emails_count - int - количество найденных email
* url - string - URL в открытом виде (раскодированный из base64)
* decrypted_plain_text - string - текст расшифрованный из полученного шифротекста и ключа
* elements_attr_list - List<string> - список выбранных из обнаруженных элементов атрибутов
* emails_list - List<string> - список email




## Условия

1) Для сериализации / десериализации JSON использовать стандарную библиотеку .NET Core 
2) Везде используется кодировка UTF-8
3) Для дешифрования использовать стандартные функции .NET
4) Использовать скомпилированное регулярное выражение
5) Функция, выполняющая обработку, должна быть асинхронной. Использовать доступные асинхронные функции внутри (парсинг HTML, применение регулярных выражений, сериализация и прочее ). Объяснить пользу от использования асинхронных функций в RESP API, быть готовым обосновать отказ от использования асинхронных аналогов в некоторых местах. (Подробнее - https://learn.microsoft.com/ru-ru/dotnet/csharp/programming-guide/concepts/async/ , https://learn.microsoft.com/ru-ru/dotnet/csharp/async)
6) Выложить проект в публичный личный репозиторий на GitHub.
7) В корень проекта положить 2 файла с JSON - результатом работы API функции для входящих данных json_payload_1.txt, json_payload_2.txt
